# Jaehyeong Tech Blog - Dev Environment (MSA)

# Secret 이름
secrets:
  name: jaehyeong-tech-secret-dev

# MSA Services - Dev 환경 오버라이드
services:
  auth:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      ADMIN_EMAILS:
        secretName: jaehyeong-tech-secret-dev
        key: admin-emails
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  blog:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  comment:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  page:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  analytics:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
      GA_PROPERTY_ID: "518938330"
      GA_CLIENT_EMAIL: "ga4-reader@jaehyeong-tech.iam.gserviceaccount.com"
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  storage:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    env:
      NODE_ENV: development
    secretEnv:
      DATABASE_URL:
        secretName: jaehyeong-tech-secret-dev
        key: database-url
      JWT_SECRET:
        secretName: jaehyeong-tech-secret-dev
        key: jwt-secret

  web:
    enabled: true
    replicaCount: 1
    image:
      tag: dev-8677c24
    resources:
      requests:
        cpu: 30m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi

# PostgreSQL - 별도 manifest 사용
postgresql:
  enabled: false

# PostgreSQL (postgres:16-alpine)
db:
  secretName: jaehyeong-tech-db-secret-dev
  storageClass: local-path
  size: 1Gi
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Dev 도메인
virtualService:
  host: dev-tech.jaehyeong.site
  tenantId: jaehyeong-tech
