# ArgoCD Helm values
# Chart: argo/argo-cd

server:
  # Service 타입 (Istio Gateway 뒤에 있으므로 ClusterIP)
  service:
    type: ClusterIP

  # 리소스
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Redis
redis:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Repo Server (needs more memory for git clone & manifest generation)
repoServer:
  resources:
    requests:
      cpu: 50m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi

# Application Controller
controller:
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# ApplicationSet Controller
applicationSet:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Notifications Controller
notifications:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Dex (OIDC provider)
dex:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Configs
configs:
  # argocd-cm ConfigMap
  cm:
    url: https://argocd.jaehyeong.site
  params:
    # 자동 동기화 주기 (webhook 폴백용, 30분)
    timeout.reconciliation: 1800s
    # Istio 사용 시 insecure 모드 (TLS는 Istio Gateway가 처리)
    server.insecure: true
